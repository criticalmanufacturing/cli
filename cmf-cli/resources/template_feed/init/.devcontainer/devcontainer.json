{
    "image": "criticalmanufacturing.io/criticalmanufacturing/devcontainer:<%= $CLI_PARAM_MESVersion-Major %>",
    "runArgs": [
        "--network",
        "host"
    ],
    "features": {
        "ghcr.io/criticalmanufacturing/cli/install:1": {
            "version": "<%= $CLI_PARAM_CLIVersion-MajorRange %>"
        },
        "ghcr.io/criticalmanufacturing/portal-sdk/install:1": {}
    },
    "mounts": [
        "source=/var/run/docker.sock,target=/var/run/docker.sock,type=bind,consistency=cached",
        "source=${localEnv:HOME}${localEnv:USERPROFILE}/.cmf-auth.json,target=/home/vscode/.cmf-auth.json,type=bind,consistency=cached",
        "source=${localEnv:XDG_CONFIG_HOME}${localEnv:APPDATA}/cmfportal/cmfportaltoken,target=/home/vscode/.config/cmfportal/cmfportaltoken,type=bind,consistency=cached"
    ],
    "containerEnv": {
        "DOCKER_REGISTRY": "docker.io",
        "CM_DOCKER_REGISTRY": "criticalmanufacturing.io"
    },
    "customizations": {
        "vscode": {
            "extensions": [
                "formulahendry.docker-explorer",
                "ms-azuretools.vscode-docker",
                "ms-dotnettools.csdevkit@1.9.55",
                "ms-dotnettools.csharp@2.39.29",
                "ms-dotnettools.vscode-dotnet-runtime",
                "ms-dotnettools.vscodeintellicode-csharp",
                "FullStackSpider.visual-nuget",
                "actboy168.tasks"
            ]
        }
    },
    "forwardPorts": [
        80
    ],
    "postStartCommand": "cmf login sync"
}