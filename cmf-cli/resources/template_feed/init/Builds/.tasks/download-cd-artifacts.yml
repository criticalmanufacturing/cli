steps:
# Clean deploy folder
- task: DeleteFiles@1
  displayName: Clean $(CandidatePackages) folder
  inputs:
    SourceFolder: $(CandidatePackages)
    Contents: "**"

# Download Configurations Artifacts
- task: DownloadBuildArtifacts@0
  displayName: Download Configurations
  inputs:
    buildType: specific
    project: $(System.TeamProject)
    pipeline: CI-Publish
    specificBuildWithTriggering: true
    buildVersionToDownload: specific
    buildId: $(resources.pipeline.CIPublish.runID)
    downloadType: single
    artifactName: Configurations
    downloadPath: $(CandidatePackages)

# Download Package Artifacts
- task: DownloadBuildArtifacts@0
  displayName: Download Package
  inputs:
    buildType: specific
    project: $(System.TeamProject)
    pipeline: CI-Publish
    specificBuildWithTriggering: true
    buildVersionToDownload: specific
    buildId: $(resources.pipeline.CIPublish.runID)
    downloadType: single
    artifactName: Package
    downloadPath: $(CandidatePackages)

# Download Tests Artifacts
- task: DownloadBuildArtifacts@0
  displayName: Download Tests
  inputs:
    buildType: specific
    project: $(System.TeamProject)
    pipeline: CI-Publish
    specificBuildWithTriggering: true
    buildVersionToDownload: specific
    buildId: $(resources.pipeline.CIPublish.runID)
    downloadType: single
    artifactName: Tests
    downloadPath: $(CandidatePackages)
  continueOnError: true